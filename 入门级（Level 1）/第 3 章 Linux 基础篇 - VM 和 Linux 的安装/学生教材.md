# 1.	CentOS 7 虚拟机安装教程

## 1.1	准备工作



1. **创建虚拟机存储文件夹**：在磁盘空间较为充裕的磁盘（如 D 盘）中，新建一个名为 “VM” 的文件夹，用于存放后续要安装的所有虚拟机。接着在 “VM” 文件夹内，再新建一个自定义名称的文件夹，例如 “centos7x64 - 3” （此名称可根据个人需求，代表 CentOS 7、64 位的第 3 个虚拟机，你可按实际虚拟机数量和个人喜好修改）。
2. **准备并存放镜像文件**：准备好 CentOS 的 iso 镜像文件。为便于管理，在 D 盘新建名为 “ISO” 的文件夹，专门用于存放所有镜像文件，避免文件丢失或混乱。
3. **安装 Vmware 虚拟机软件**：参考相关教程（如 “Win10 虚拟机安装”），完成 Vmware 虚拟机软件的安装。

## 1.2	虚拟机创建步骤

1. **新建虚拟机**：打开 Vmware 虚拟机软件，点击 “新建虚拟机”，选择 “自定义” 模式，然后点击 “下一步”。
2. **设置硬件兼容性**：硬件兼容性选项保持默认设置，直接点击 “下一步”。
3. **选择安装操作系统的时间**：选择 “稍后安装操作系统”，继续点击 “下一步”。
4. **选择客户机操作系统**：在 “客户机操作系统” 选项中，选择 “Linux”，并在下方版本中选择 “红帽 Linux 7 64 位”，因为 CentOS 属于红帽系。
5. **命名虚拟机并选择存储位置**：为虚拟机命名，然后点击 “浏览”，选择在准备工作中创建的 D 盘 “VM” 文件夹下的 “centos7x64 - 3” 文件夹作为虚拟机的存储位置，点击 “下一步”。
6. 配置处理器
   - **查看本地 CPU 信息**：使用快捷键 “Ctrl + Shift + Esc” 打开任务管理器，选择 “性能” 选项卡，点击右上角三个点，选择 “资源监视器”，查看本地计算机的 CPU 数量和核心数。例如，若看到有两块 CPU，且右侧显示到 CPU15（从 0 到 15），则表明共有 16 个核心，即两块 CPU，每块 8 个核心。
   - **设置虚拟机处理器**：回到虚拟机设置界面，“处理器数量” 一般选择 2，“每个处理器的内核数量” 选择 2，即总共分配 4 个处理器内核（2×2 = 4），点击 “下一步”。
7. **配置虚拟机内存**：将虚拟机内存设置为 2048M（即 2G），点击 “下一步”。
8. **配置网络连接**：网络连接方式选择 “使用网络地址转换（NAT）”，点击 “下一步” 。后续会对网络连接方式进行详细讲解。
9. **设置 I/O 控制器类型**：I/O 控制器类型保持默认设置，点击 “下一步”。
10. **选择虚拟磁盘类型**：虚拟磁盘类型选择 “SCSI”，点击 “下一步”。
11. **创建虚拟磁盘**：选择 “创建新的虚拟磁盘”，点击 “下一步”。
12. 分配磁盘空间
    - 设置磁盘大小为 20G，若不选择 “立即分配所有磁盘空间”，则不会马上在物理硬盘中占用 20G 空间。
    - 对于新手，建议选择 “将虚拟磁盘拆分成多个文件”，这种方式便于移动或克隆虚拟机；若选择 “存储为单个文件”，文件管理相对简单，但可能在移动或复制时受文件大小限制。设置完成后点击 “下一步”。
13. **指定磁盘文件**：磁盘文件位置和名称保持默认设置，点击 “下一步”，再点击 “完成”，至此虚拟机硬件配置初步完成。

## 1.3	配置虚拟机启动镜像

1. **打开自定义硬件设置**：虚拟机创建完成后，点击 “自定义硬件”。
2. 配置镜像文件
   - 在 “自定义硬件” 窗口中，依次点击 “新 CD/DVD”，选择 “使用 ISO 映像文件”。
   - 通过 “浏览” 按钮，找到在准备工作中存放在 “ISO” 文件夹内的 CentOS 系统镜像文件。
   - 选择完成后，点击 “关闭”，再点击 “完成”。

## 1.4	安装 CentOS 7 操作系统

1. **启动虚拟机**：点击 “开启此虚拟机”，出现黑色窗口后，在虚拟机界面内点击鼠标，使光标进入虚拟机。按键盘上下键，将光标移动到 “Install CentOS 7” 位置，按下回车键，正式开始安装 CentOS 7，等待加载完成。
2. **选择安装语言**：选择 “简体中文”，点击右下角 “继续”。
3. 选择软件安装
   - 点击 “软件安装” 选项。
   - 选择 “GNOME 桌面”。
   - 在右侧勾选 “传统 X Windows 系统的兼容性”、“兼容性程序库” 以及 “开发工具”。
   - 选择完成后，点击左上角 “完成”。
4. 选择安装位置并配置分区
   - 点击 “安装位置” 选项，选择 “我要配置分区”，点击 “完成”。
   - **添加引导分区（/boot）**：点击 “+” 号添加分区，选择 “/boot” 分区，容量分配为 1G，点击 “添加挂载点”。
   - **添加交换分区（swap）**：再次点击 “+” 号，添加 “swap” 分区，大小设置为与之前分配的虚拟机内存相同（2G），点击 “添加挂载点”。
   - **添加根分区（/）**：继续点击 “+” 号，添加 “/” 根分区，容量无需手动填写，默认将剩余空间全部分配，点击 “添加挂载点”。
   - **设置文件系统类型**：点击 “/boot” 分区，将文件系统类型改为 “ext4”；同样地，将 “/” 根分区也改为 “ext4” 文件系统，“swap” 分区保持默认设置。点击 “完成”，在弹出的 “更改摘要” 窗口中点击 “接受更改”。
   - **关于 KDUMP**：KDUMP 是系统崩溃的转储机制，系统崩溃时可捕获系统信息，有助于诊断错误，但会占用一定内存。在实际使用中建议启用，学习环境中可根据需求选择是否启用。
5. 配置网络
   - 点击 “网络和主机名” 选项。
   - 打开 “以太网” 开关，修改主机名（可自定义），点击 “应用”，再点击左上角 “完成”。此时应显示 “有线已连接”。
6. 设置用户及密码
   - **设置 root 密码**：点击 “root 密码” 进行设置。学习环境中可设置简单密码以便输入，但在实际使用场景中，务必设置复杂密码以保障系统安全。若密码过于简单，系统会提示，再次点击 “完成” 即可。
   - **创建普通用户**：点击 “创建用户”，依次填入用户名、密码等信息，点击 “完成”。等待软件安装完成，安装结束后点击 “重启”。

## 1.5	系统初始化设置

1. **重启进入系统**：重启后，选择第一个选项进入系统。
2. **同意许可协议**：阅读许可协议后，勾选 “我同意许可协议”，点击 “完成配置”。
3. **登录系统**：使用 root 账户登录系统。
4. 配置语言及其他设置
   - 配置系统语言，可根据需求进行调整。
   - 关闭 “位置服务”。
   - 跳过 “连接在线账号” 步骤。
     完成以上设置后，当看到网络连接图标显示正常时，表明网络已成功连接，至此 CentOS 7 虚拟机安装及初始化设置全部完成，可以开始使用。

# 2.	图文教程

## 2.1	准备工作

 1. 在一个空间比较大的地方，如D盘中，新建文件夹，改名叫VM，里面存放我们未来要安装的所有虚拟机，在VM下新建一个文件夹改名叫centos7x64-3  （注：代表centos7，64位的第3个虚拟机，你们可以根据自己的数量和喜好自行更改）
 2. 准备好centos的iso镜像，还是一样，不要乱放，到时候自己都找不到了，在D盘新建文件夹改名为ISO，这个文件夹以后就用来存放所有的镜像文件
 3. Vmware虚拟机软件参考上一篇文章：Win10虚拟机安装

准备工作完成后，打开VMware：
1.点击新建虚拟机
选择自定义，下一步
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/77c4785b095643e6844be657faa76e5a.png)
2.硬件兼容性默认下一步
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/1f7eaf9d6ada4f91a7ebf960f1b21fa3.png)
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/2c597ef81b644605b4f88fe57305846b.png)
3.稍后安装操作系统
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/9707927f15be4aa4865dde83a8a1ea5f.png)
4.客户机操作系统这里，我们选择Linux，下面选择红帽Linux7 64位
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/2428fde0766d4e618a0cf866bb9b8c0a.png)
因为centos是属于红帽的
5.给虚拟机命名，然后选择我们准备工作中D盘新建的VM下的centos7x64-3
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/fafcbd1d54cd40de9579f181a50466fe.png)
6.处理器数量这里，首先查看一下自己有几个cpu，并且看一下自己是几个核心的
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/ee0022bb51f84ee68a9c9cf870bc9e0e.png)
查看方法如下：
使用快捷键ctrl+shift+esc打开任务管理器然后选择性能，右上角三个点，选择资源监视器
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/58f732ca3aaa42d5b8b6f5d8ed6f19ae.png)
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/8e9b8ffe02404800a8044de1fa20a36a.png)
我们看到有两块CPU，并且在右侧划到最下面
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/369123e3a77f4e2aa67f527282ea17c6.png)
我们看到一共到cpu15，那从0一直到15，一共有16个核心，所以我的电脑是两块cpu，并且每块有8个核心
回到虚拟机中，处理器配置我一般选择2和2
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/e0da17b7c2d6463bb6214b20213c2073.png)
两块cpu并且每块cpu分配两个核心出来
处理器内核总数就是2*2=4个
7.虚拟机内存配置，选择2048M，也就是2G即可
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/037abc7741364d348017ce3ce5bc3902.png)
8.网络配置

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/f0dcde97a4504421be3e1359a056477d.png)
网络这里三种网络连接方式后面再说，这里先选择使用网络地址转换即可

9.I/O控制器类型这里默认下一步
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/d5a1a53520774213b8c0cd519d2f1e47.png)
10.虚拟磁盘类型选择SCSI
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/3d28c0dec279446b99c622b48d6f1fee.png)
11.创建新的虚拟磁盘
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/23e7e1debc36441fb1f6b8137cfee725.png)12.分配磁盘空间
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/844cc52ab3994c62bb7e4caa8dafbf05.png)

大小分配20G即可，只要不立即分配就不会马上在硬盘中占用20G空间，选择将虚拟磁盘拆分成多个文件，方便移动/克隆虚拟机，新手选择存储为单个文件即可
13.指定磁盘文件，这里默认
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/99a236cf3bcb452c9bbc628ab3ae693e.png)
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/aa6e7bbbad764ed596528aad312757ed.png)
到这里我们的虚拟机就创建好了，但是还不能用，需要设置启动的镜像才可以，点击自定义硬件

14.配置镜像
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/623f763854a145eba70cb6bfc7bb6a1b.png)
依次点击新CD/DVD--》使用ISO映像文件--》找到我们准备工作中存放好的系统镜像，然后点击关闭，然后点击完成，然后等待出现以下界面
15.点击开启此虚拟机
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/ea26ae82197d404ebfb6b15087f5166b.png)
出来一个黑框框后，在虚拟机中点一下鼠标，进入虚拟机里面，然后按动上下键，可以看到虚拟机里面的光标有了反应，我们把光标移动到第一个位置Install Centos7按下回车正式开始安装centos7。等待这些加载完
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/0f2674fdb14a402fa42edc0000a2517c.png)
16.选择语言
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/09c7d6ec9abf4944860656524f7bfdf3.png)
翻到最后，选择简体中文然后点击右下角的继续
17.点击软件安装，选择一下我们要安装的软件
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/0ca83a89d757420e84499c66258b3b9b.png)
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/95ff5b083a1b478289a2d2e9a55b45d9.png)
选择GNOME桌面，然后右侧选择三个，分别是传统X　Ｗｉｎｄｏｗｓ系统的兼容性，兼容性程序库，以及开发工具,选择完成后点击左上角的完成

18.选择安装位置,选择我要配置分区
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/1459af2128d648e88e1235ff573f71e4.png)
19.添加三个分区
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/f8393fb10c3f409aac25f57a55ee5ad3.png)
点击加号添加第一个分区,引导分区/boot
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/4920320526624de2a43931015588729f.png)
然后容量分配1G
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/153650d1a95947159460e578116850c1.png)
然后在点击加号,添加第二个分区,交换分区(swap)
这个我们设置成和分配的内存一样的大小,也是2G
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/4ca5d17a51034b1995b67c8bcfc80473.png)
完成后点击添加挂载点
最后再点击加号,分配根分区( / )
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/912ec7d045cc4a2f8604c3828049e50d.png)
容量不用写,默认将剩余的全部分配
完成后,我们点击/boot分区,文件系统类型改为ext4
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/5f357b452ce54242992616cbd9f4a8eb.png)
同样的把根分区也改成标准分区,文件系统改为ext4然后直接点击完成,swap分区不用动
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/595d4974c3f941e2b78a993baac491d5.png)
弹出来更改摘要后,点击接受更改
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/1c5081b0e6974df99334ff5f8103916c.png)
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/2f865ee16b6a495ab6cbcb381a261709.png)
这个KDUMP是我们系统崩溃的转储机制,当我们系统崩溃之后会给我们捕获系统信息,对于我们诊断错误会有一些帮助,但是会占用一些内存,在实际使用的时候,这个是一定要有的,但是我们作为学习使用可以加\启用也可以不启用

20.配置网络,点击网络和主机名,我们把以太网的开关打开
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/980f27bbef9f45f6a39fa7a9e5dd9339.png)

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/2b604b1df9504d7b8a483e88c5e9f868.png)
修改主机名,点击应用,然后点击左上角的完成
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/7e144b3fa7b74ac2af0fa17a7c816aef.png)
回来后我们看到已经显示有线已连接了,然后我们点击开始安装
21.设置用户以及root用户密码
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/af2189777fe347e1bdff09337a82615e.png)
点击root密码开始设置
建议使用简单密码,毕竟以后自己会经常作为学习使用没有太多东西,太复杂不好输入,但是在实际使用时一定要设置的复杂一些!
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/c13a7457b2574aa3a4eb7f2f55f99a10.png)
密码太过简单会提示,但是我们不管,再点击一下完成就可以了
然后点击创建用户
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/ea4dfbdb2cd94ca8840fedc284c7a9e1.png)
依次填入名字以及密码即可,然后点击完成等待软件安装结束
安装结束后点击重启即可
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/60e42cf397a540c087bfab62d8ac1e99.png)

21.重启后，选择第一个进入系统
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/a4149a87b68d429fb62c37d89f361f53.png)
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/6644f11b54c1444fa92713a09ff8c6e5.png)
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/8ae4f8b861794e7cb6615d64f285a7c9.png)
同意协议后点击完成配置
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/9527b5762224429db055679b169ca0d7.png)
22.登录用户
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/51f026061ddc45669813388876a74320.png)
使用root账户登陆进来后，配置一下语言
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/7d288efcdc0b4526b5e419fa0a1b781e.png)
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/cd8f688f780d426eb65cd7dbec04e3df.png)
位置服务关闭
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/6cacf9c8ad8f4cff94633669306fc658.png)
连接在线账号跳过，然后开始使用
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/6240e9ff0d8b436f92934183d341cdb5.png)
当我们看到这个图标的时候，网络就是连接上的
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/caaf59dd720b44fda51bfe81d475b3bb.png)

# 3.	课后习题

## 一、选择题

1. 在安装 CentOS 7 虚拟机前，需要在磁盘中创建专门的文件夹来存放虚拟机相关文件，以下哪个操作是正确的？（ ）
   A. 在 C 盘根目录创建名为 “VM” 的文件夹，用于存放所有虚拟机，在 “VM” 文件夹下创建名为 “centos7” 的文件夹存放 CentOS 7 虚拟机
   B. 在 D 盘创建名为 “VMware” 的文件夹，在其下创建名为 “centos7x64 - 1” 的文件夹存放 CentOS 7 虚拟机
   C. 在 D 盘创建名为 “VM” 的文件夹，用于存放所有虚拟机，在 “VM” 文件夹下创建名为 “centos7x64 - 5” 的文件夹存放 CentOS 7 虚拟机
   D. 在 E 盘创建名为 “ISO” 的文件夹，在其下创建名为 “centos7” 的文件夹存放 CentOS 7 虚拟机
2. 安装 CentOS 7 虚拟机时，选择客户机操作系统应该是（ ）
   A. Windows 7 64 位
   B. Linux - 红帽 Linux 7 64 位
   C. Ubuntu 18.04
   D. macOS High Sierra
3. 在配置虚拟机处理器时，若本地计算机有两块 CPU，每块 CPU 有 4 个核心，在虚拟机中 “处理器数量” 和 “每个处理器的内核数量” 通常可以设置为（ ）
   A. 4 和 4
   B. 2 和 2
   C. 1 和 4
   D. 4 和 1
4. 安装 CentOS 7 虚拟机时，网络连接方式选择 “使用网络地址转换（NAT）” 的原因不包括以下哪一项？（ ）
   A. 方便虚拟机共享主机网络
   B. 虚拟机可以访问外网，外网不能主动访问虚拟机
   C. 网络配置相对简单
   D. 可以让虚拟机拥有独立的公网 IP 地址
5. 以下关于 CentOS 7 虚拟机分区设置，说法错误的是（ ）
   A. 引导分区（/boot）一般分配 1G 容量
   B. 交换分区（swap）大小通常设置为与虚拟机内存相同
   C. 根分区（/）容量默认将剩余空间全部分配
   D. 交换分区（swap）的文件系统类型必须设置为 ext4

## 二、简答题

1. 简述安装 CentOS 7 虚拟机前需要做的准备工作。

2. 在安装 CentOS 7 虚拟机过程中，配置网络时需要进行哪些操作？

3. 安装 CentOS 7 虚拟机时，如何设置用户及密码？在实际使用场景和学习场景中设置密码有什么不同要求？


## 三、实操题

1. 假设你要在自己的电脑上安装 CentOS 7 虚拟机，请按照教程步骤进行操作，并在操作过程中记录下遇到的问题及解决方法。（本题实际操作完成后，需要根据记录进行书面总结回答）

2. 在已经安装好的 CentOS 7 虚拟机中，尝试重新配置网络连接方式为 “桥接模式”，并简述操作步骤及配置后的网络效果。
