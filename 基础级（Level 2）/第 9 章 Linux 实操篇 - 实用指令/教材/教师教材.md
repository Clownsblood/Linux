# 第 9 章 Linux 实操篇 - 实用指令

## 9.1 指定运行级别

### 9.1.1 基本介绍

在 Linux 系统中，运行级别决定了系统启动后所提供的服务和用户界面。不同的运行级别具有不同的功能和用途，具体说明如下：

- **0**：关机。选择此运行级别，系统将停止运行并关闭电源。
- **1**：单用户模式。常用于找回丢失的密码，因为在该模式下，系统仅允许一个用户登录，且无需密码验证即可获得 root 权限。
- **2**：多用户状态但没有网络服务。在此运行级别，系统支持多个用户同时登录，但网络服务未启动，适用于一些不需要网络连接的本地操作。
- **3**：多用户状态且有网络服务。这是最常用的运行级别之一，系统提供完整的多用户功能和网络服务，用户可以通过网络进行各种操作，如远程登录、文件共享等。
- **4**：系统未使用，保留给用户自定义。通常情况下，该运行级别未被系统默认使用，用户可根据自身需求进行配置。
- **5**：图形界面。系统启动后会进入图形化用户界面，适合普通用户进行日常操作，提供了直观的操作环境。
- **6**：系统重启。选择此运行级别，系统将重新启动。

在实际应用中，常用的运行级别是 3 和 5，用户也可以根据需要指定默认运行级别，后续将进行演示。

### 9.1.2 应用实例

切换运行级别的命令为`init [0123456]`。例如，要从当前运行级别切换到运行级别 5，再切换到运行级别 3，最后关机，可以按以下步骤操作：

1. 输入`init 5`，系统将切换到图形界面运行级别。
2. 再输入`init 3`，系统将切换到多用户有网络服务的运行级别。
3. 最后输入`init 0`，系统将关机。

### 9.1.3 CentOS7 后运行级别说明

在 CentOS7 以前，运行级别相关配置在`/etc/inittab`文件中。而在 CentOS7 及之后，系统对运行级别进行了简化，采用了新的目标（target）概念。其中：

- `multi - user.target`：类似于运行级别 3，提供多用户且有网络服务的环境。
- `graphical.target`：类似于运行级别 5，启动后进入图形界面。

若要查看当前默认目标，可以运行：`systemctl get - default`。
若要设置默认目标，可以运行：`systemctl set - default TARGET.target`，其中`TARGET.target`为要设置的目标，如`multi - user.target`或`graphical.target`。

## 9.2 找回 root 密码

### 9.2.1 面试题

在 Linux 系统管理中，“如何找回 root 密码” 是一个常见的面试问题。

### 9.2.2 课堂练习

1. 假设 root 密码忘记了，找回密码的方法
   - 重启系统，在启动过程中，当出现 GRUB 菜单时，选择要启动的内核项，然后按`e`键进入编辑模式。
   - 在编辑模式下，找到以`linux16`或`linuxefi`开头的行，在行末添加`init=/bin/sh`。
   - 按`Ctrl + x`组合键启动系统，此时系统会进入单用户模式。
   - 在单用户模式下，挂载根文件系统为可读写模式，输入命令`mount -o remount,rw /`。
   - 然后使用`passwd`命令修改 root 密码，按照提示输入新密码并确认。
   - 修改完成后，输入`exec /sbin/init`，系统将重新启动，此时 root 密码已更新。
2. 设置运行级别，使 Linux 运行后直接进入到命令行终端（3）
   - 在 CentOS7 及之后的系统中，运行`systemctl set - default multi - user.target`命令，即可将默认运行级别设置为 3，下次系统启动时将直接进入命令行终端。

## 9.3 帮助指令

### 9.3.1 man 获得帮助信息

- **基本语法**：`man [命令或配置文件]`，该指令的功能是获得指定命令或配置文件的帮助信息。
- **案例**：若要查看`ls`命令的帮助信息，在终端输入`man ls`。通过`man`指令查看帮助时，需要注意在 Linux 下，隐藏文件是以`.`开头的。此外，`ls`命令的选项可以组合使用，例如`ls -al`表示以列表形式显示当前目录所有文件和目录，包括隐藏文件；`ls -al /root`则表示以列表形式显示`/root`目录下的所有文件和目录，包括隐藏文件。

### 9.3.2 help 指令

- **基本语法**：`help 命令`，此指令用于获得 Shell 内置命令的帮助信息。
- **应用实例**：若要查看`cd`命令的帮助信息，在终端输入`help cd`，即可获取关于`cd`命令的详细说明和使用方法。

### 9.3.3 应用实例

以查看`cd`命令帮助信息为例，输入`help cd`后，系统会显示`cd`命令的语法、功能及相关参数说明，帮助用户更好地使用该命令。

### 9.3.4 百度帮助更直接

对于英语不太好的用户，在遇到指令使用问题时，也可以直接通过百度搜索相关指令的使用方法，往往能获得更直观易懂的帮助信息。

## 9.4 文件目录类

### 9.4.1 pwd 指令

- **基本语法**：`pwd`，其功能是显示当前工作目录的绝对路径。
- **应用实例**：在终端输入`pwd`，系统将输出当前所在工作目录的完整路径，例如`/home/user`。这对于明确当前操作位置非常有用，特别是在进行文件操作或路径切换时。

### 9.4.2 ls 指令

- **基本语法**：`ls [选项] [目录或是文件]`。
- 常用选项
  - **-a**：显示当前目录所有的文件和目录，包括隐藏的文件和目录（隐藏文件以`.`开头）。
  - **-l**：以列表的方式显示信息，包括文件的权限、所有者、大小、修改时间等详细信息。
- **应用实例**：若要查看当前目录的所有内容信息，输入`ls -al`，系统将以列表形式展示当前目录下所有文件和目录的详细信息，方便用户了解目录结构和文件属性。

### 9.4.3 cd 指令

- 基本语法

  ```
  cd [参数]
  ```

  ，功能是切换到指定目录。在理解该指令时，需要明确绝对路径和相对路径的概念。绝对路径是从根目录

  ```
  /
  ```

  开始的完整路径，而相对路径是相对于当前目录的路径。

  - `cd ~`或者`cd`：回到自己的家目录。例如，如果当前用户是 root，执行`cd ~`将切换到`/root`目录。
  - `cd..`：回到当前目录的上一级目录。

- 应用实例

  - **案例 1**：使用绝对路径切换到 root 目录，输入`cd /root`。
  - **案例 2**：假设当前在`/home/tom`目录，使用相对路径切换到`/root`目录，输入`cd ../../root`。这里`..`表示上一级目录，通过两次`..`回到`/home`的上级目录`/`，再进入`root`目录。
  - **案例 3**：回到当前目录的上一级目录，输入`cd..`。
  - **案例 4**：回到家目录，输入`cd ~`。

### 9.4.4 mkdir 指令

- mkdir 指令用于创建目录
  - **基本语法**：`mkdir [选项] 要创建的目录`。
  - **常用选项**：`-p`，用于创建多级目录。当要创建的目录的上级目录不存在时，使用`-p`选项可以一并创建这些上级目录。
- 应用实例
  - **案例 1**：创建一个目录`/home/dog`，输入`mkdir /home/dog`。
  - **案例 2**：创建多级目录`/home/animal/tiger`，输入`mkdir -p /home/animal/tiger`。如果`/home/animal`目录不存在，`-p`选项会先创建`/home/animal`目录，再在其中创建`tiger`目录。

### 9.4.5 rmdir 指令

- rmdir 指令用于删除空目录
  - **基本语法**：`rmdir [选项] 要删除的空目录`。
  - **应用实例**：若要删除一个空目录`/home/dog`，输入`rmdir /home/dog`。
  - **使用细节**：`rmdir`只能删除空目录，如果目录下有内容时无法删除。若需要删除非空目录，需要使用`rm -rf 要删除的目录`。例如，若要删除`/home/animal`目录及其所有内容（包括子目录和文件），输入`rm -rf /home/animal`。需要注意的是，`rm -rf`命令会强制删除目录及其所有内容，且不进行提示，使用时需谨慎操作，以免误删重要数据。

### 9.4.6 touch 指令

- touch 指令用于创建空文件
  - **基本语法**：`touch 文件名称`。
  - **应用实例**：若要在`/home`目录下创建一个空文件`hello.txt`，输入`touch /home/hello.txt`。

### 9.4.7 cp 指令

- cp 指令用于拷贝文件到指定目录
  - **基本语法**：`cp [选项] source dest`，其中`source`是源文件或目录，`dest`是目标文件或目录。
  - **常用选项**：`-r`，用于递归复制整个文件夹。当复制的源是一个目录时，需要使用`-r`选项才能将目录及其包含的所有文件和子目录都复制到目标位置。
- 应用实例
  - **案例 1**：将`/home/hello.txt`拷贝到`/home/bbb`目录下，输入`cp /home/hello.txt /home/bbb`。
  - **案例 2**：递归复制整个文件夹，例如将`/home/bbb`整个目录拷贝到`/opt`，输入`cp -r /home/bbb /opt`。
  - **使用细节**：若要强制覆盖目标文件而不提示，可以使用`\cp`或`\cp -r`。例如，`\cp -r /home/bbb /opt`，这种方式在需要批量覆盖文件且确定不会造成数据丢失时较为方便，但同样需要谨慎使用，避免误覆盖重要数据。

### 9.4.8 rm 指令

- rm 指令用于移除文件或目录
  - **基本语法**：`rm [选项] 要删除的文件或目录`。
  - 常用选项
    - **-r**：递归删除整个文件夹，用于删除包含子目录和文件的目录。
    - **-f**：强制删除不提示，使用该选项时，`rm`命令将直接删除文件或目录，不会提示用户确认，使用时务必小心。
- 应用实例
  - **案例 1**：将`/home/hello.txt`删除，输入`rm /home/hello.txt`，系统会提示确认是否删除，输入`y`确认删除。
  - **案例 2**：递归删除整个文件夹`/home/bbb`，不提示确认，输入`rm -rf /home/bbb`。此操作会直接删除`/home/bbb`目录及其所有内容，使用时需确保该目录下的数据不再需要。
  - **使用细节**：若要强制删除文件或目录且不提示，带上`-f`参数即可。但要特别注意，这种方式可能会导致数据不可恢复，操作前应仔细确认。

### 9.4.9 mv 指令

- mv 指令用于移动文件与目录或重命名
  - 基本语法
    - `mv oldNameFile newNameFile`：用于重命名文件或目录，将`oldNameFile`重命名为`newNameFile`。
    - `mv /temp/movefile /targetFolder`：用于移动文件，将`/temp/movefile`文件移动到`/targetFolder`目录下。
- 应用实例
  - **案例 1**：将`/home/cat.txt`文件重新命名为`pig.txt`，输入`mv /home/cat.txt /home/pig.txt`。
  - **案例 2**：将`/home/pig.txt`文件移动到`/root`目录下，输入`mv /home/pig.txt /root`。
  - **案例 3**：移动整个目录，例如将`/opt/bbb`移动到`/home`下，输入`mv /opt/bbb /home/`。

### 9.4.10 cat 指令

- cat 指令用于查看文件内容
  - **基本语法**：`cat [选项] 要查看的文件`。
  - **常用选项**：`-n`，用于显示行号，方便定位文件中的具体行。
- **应用实例**：若要查看`/etc/profile`文件内容并显示行号，输入`cat -n /etc/profile`。
- **使用细节**：`cat`只能浏览文件内容，而不能修改文件。为了浏览方便，一般会带上管道命令`| more`，实现分页显示。例如，`cat -n /etc/profile | more`，这样可以逐页查看文件内容，并通过`more`指令提供的交互功能进行操作，如按空格键向下翻页，按`Enter`键向下滚动一行等。

### 9.4.11 more 指令

- more 指令是一个基于 VI 编辑器的文本过滤器，以全屏幕的方式按页显示文本文件的内容

  ：该指令内置了若干快捷键，方便用户进行交互操作。

  - **基本语法**：`more 要查看的文件`。
  - 操作说明
    - 按空格键向下翻一页。
    - 按`Enter`键向下滚动一行。
    - 按`q`键退出查看。

- **应用实例**：若要采用`more`查看`/etc/profile`文件，输入`more /etc/profile`，系统将以全屏幕方式按页显示该文件内容，用户可通过上述快捷键进行操作。

### 9.4.12 less 指令

- less 指令用于分屏查看文件内容，功能与 more 指令类似，但更强大，支持各种显示终端

  ：它在显示文件内容时，不是一次将整个文件加载之后才显示，而是根据显示需要加载内容，对于显示大型文件具有较高的效率。

  - **基本语法**：`less 要查看的文件`。
  - 操作说明
    - 按`Page Down`键向下翻一页。
    - 按`Page Up`键向上翻一页。
    - 按`/`键，然后输入要查找的内容，可在文件中进行搜索，按`n`键查找下一个匹配项，按`N`键查找上一个匹配项。
    - 按`q`键退出查看。

- **应用实例**：若要采用`less`查看一个大文件`/opt/杂文.txt`，输入`less /opt/杂文.txt`，用户可通过上述操作方式浏览文件内容。

### 9.4.13 echo 指令

- echo 指令用于输出内容到控制台
  - **基本语法**：`echo [选项] [输出内容]`。
- 应用实例
  - **案例 1**：使用`echo`指令输出环境变量，例如输出`$PATH`和`$HOSTNAME`，输入`echo $PATH`或`echo $HOSTNAME`，系统将输出相应环境变量的值。
  - **案例 2**：使用`echo`指令输出`hello,world!`，输入`echo hello,world!`，控制台将显示`hello,world!`。

### 9.4.14 head 指令

- head 用于显示文件的开头部分内容，默认情况下显示文件的前 10 行内容
  - 基本语法
    - `head 文件`：查看文件头 10 行内容。
    - `head -n 5 文件`：查看文件头 5 行内容，其中`5`可以替换为任意行数。
- **应用实例**：若要查看`/etc/profile`的前面 5 行代码，输入`head -n 5 /etc/profile`，系统将输出该文件的前 5 行内容。

### 9.4.15 tail 指令

- tail 用于输出文件中尾部的内容，默认情况下显示文件的后 10 行内容
  - 基本语法
    - `tail 文件`：查看文件尾 10 行内容。
    - `tail -n 5 文件`：查看文件尾 5 行内容，其中`5`可以替换为任意行数。
    - `tail -f 文件`：实时追踪该文档的所有更新，常用于查看日志文件，当文件有新内容追加时，会实时显示在终端。
- 应用实例
  - **案例 1**：查看`/etc/profile`最后 5 行的代码，输入`tail -n 5 /etc/profile`。
  - **案例 2**：实时监控`/home/mydate.txt`文件，当文件有变化时实时查看，例如实时追加`hello,world`，可以先在一个终端输入`tail -f /home/mydate.txt`，然后在另一个终端向`/home/mydate.txt`文件中追加内容

### 9.4.16 > 指令和 >> 指令

- \> 为输出重定向，>> 为追加
  - 基本语法
    - `ls -l >文件`：将`ls -l`列表的内容写入指定文件（覆盖写）。若指定文件不存在，则会创建该文件；若文件已存在，则原文件内容将被覆盖。
    - `ls -al >>文件`：将`ls -al`列表的内容追加到指定文件的末尾。若文件不存在，同样会创建该文件。
    - `cat 文件1 > 文件2`：将文件 1 的内容覆盖到文件 2。若文件 2 不存在，会创建文件 2；若文件 2 已存在，其原有内容将被文件 1 的内容完全替换。
    - `echo "内容">> 文件`：将指定的内容追加到文件中。
  - 应用实例
    - **案例 1**：将`/home`目录下的文件列表写入到`/home/info.txt`中（覆盖写入），输入`ls -l /home > /home/info.txt`。如果`info.txt`原本不存在，此命令会创建该文件，并将`/home`目录下的文件列表信息写入其中；若`info.txt`已存在，则会覆盖原有内容。
    - **案例 2**：将当前日历信息追加到`/home/mycal`文件中，输入`cal >> /home/mycal`。执行该命令后，系统会获取当前日历信息，并将其添加到`/home/mycal`文件的末尾。若`mycal`文件不存在，会自动创建。

### 9.4.17 ln 指令

- 软链接也称为符号链接，类似于 Windows 里的快捷方式，主要存放了链接其他文件的路径
  - **基本语法**：`ln -s [原文件或目录] [软链接名]`，用于给原文件或目录创建一个软链接。
  - 应用实例
    - **案例 1**：在`/home`目录下创建一个软连接`myroot`，连接到`/root`目录，输入`ln -s /root /home/myroot`。此时在`/home`目录下会创建一个名为`myroot`的软链接，通过访问`/home/myroot`，实际上访问的是`/root`目录的内容。
    - **案例 2**：删除软链接`myroot`，输入`rm /home/myroot`。注意，此操作仅删除软链接本身，不会影响原文件或目录`/root`。
  - **细节说明**：当使用`pwd`指令查看目录时，若当前处于软链接所在目录，仍然看到的是软链接所在目录，而不是软链接指向的实际目录路径。例如，若当前在`/home/myroot`目录下执行`pwd`，显示的是`/home`，而非`/root`。

### 9.4.18 history 指令

- 用于查看已经执行过的历史命令，也可以执行历史指令
  - **基本语法**：`history`，用于查看已经执行过的历史命令。
  - 应用实例
    - **案例 1**：显示所有的历史命令，输入`history`，系统将列出当前用户在当前会话中执行过的所有命令及对应的编号。
    - **案例 2**：显示最近使用过的 10 个指令，输入`history 10`，系统将只列出最近执行的 10 条命令。
    - **案例 3**：执行历史编号为 5 的指令，输入`!5`，系统将执行历史命令列表中编号为 5 的指令。

## 9.5 时间日期类

### 9.5.1 date 指令 - 显示当前日期

- 基本语法
  - `date`：显示当前时间，格式通常为系统默认的日期和时间格式，如`Thu Mar 9 15:33:27 CST 2023`。
  - `date +%Y`：显示当前年份，`%Y`是表示年份的格式化参数，输出格式为四位数字，如`2023`。
  - `date +%m`：显示当前月份，`%m`表示月份，输出格式为两位数字，如`03`。
  - `date +%d`：显示当前是哪一天，`%d`表示日期，输出格式为两位数字，如`09`。
  - `date "+%Y-%m-%d %H:%M:%S"`：显示年月日时分秒，通过组合不同的格式化参数，可自定义输出格式，如`2023 - 03 - 09 15:33:27`。
- 应用实例
  - **案例 1**：显示当前时间信息，输入`date`，屏幕将输出当前系统的日期和时间。
  - **案例 2**：显示当前时间年月日，输入`date "+%Y-%m-%d"`，输出格式为`YYYY - MM - DD`，如`2023 - 03 - 09`。
  - **案例 3**：显示当前时间年月日时分秒，输入`date "+%Y-%m-%d %H:%M:%S"`，输出格式为`YYYY - MM - DD HH:MM:SS`，如`2023 - 03 - 09 15:33:27`。

### 9.5.2 date 指令 - 设置日期

- **基本语法**：`date -s 字符串时间`，用于设置系统当前时间。
- **应用实例**：设置系统当前时间为`2020 - 11 - 03 20:02:10`，输入`date -s "2020 - 11 - 03 20:02:10"`。注意，设置时间的字符串格式需与要求的格式一致，否则可能设置失败。

### 9.5.3 cal 指令

- 用于查看日历
  - **基本语法**：`cal [选项]`，不加选项时，显示本月日历。
  - 应用实例
    - **案例 1**：显示当前日历，输入`cal`，系统将显示当前月份的日历，格式类似如下：

plaintext

```plaintext
      March 2023
Su Mo Tu We Th Fr Sa
       1  2  3  4  5
 6  7  8  9 10 11 12
13 14 15 16 17 18 19
20 21 22 23 24 25 26
27 28 29 30 31
```

- **案例 2**：显示 2020 年日历，输入`cal 2020`，系统将显示 2020 年全年的日历。

## 9.6 搜索查找类

### 9.6.1 find 指令

- find 指令将从指定目录向下递归地遍历其各个子目录，将满足条件的文件或者目录显示在终端
  - **基本语法**：`find [搜索范围] [选项]`。
  - 选项说明
    - `-name`：按文件名查找，例如`find /home -name hello.txt`，表示在`/home`目录及其子目录中查找名为`hello.txt`的文件。
    - `-user`：按文件拥有者查找，如`find /opt -user nobody`，用于在`/opt`目录及其子目录中查找用户名称为`nobody`的文件。
    - `-size`：按文件大小查找，`+n`表示大于，`-n`表示小于，`n`表示等于，单位有`k`（千字节）、`M`（兆字节）、`G`（吉字节）。例如`find / -size +200M`，用于在整个 Linux 系统中查找大于 200M 的文件。
  - 应用实例
    - **案例 1**：按文件名查找，在`/home`目录下查找`hello.txt`文件，输入`find /home -name hello.txt`。
    - **案例 2**：按拥有者查找，在`/opt`目录下查找用户名称为`nobody`的文件，输入`find /opt -user nobody`。
    - **案例 3**：查找整个 Linux 系统下大于 200M 的文件，输入`find / -size +200M`。

### 9.6.2 locate 指令

- locate 指令可以快速定位文件路径

  ：它利用事先建立的系统中所有文件名称及路径的 locate 数据库实现快速定位给定的文件。由于无需遍历整个文件系统，所以查询速度较快。但为了保证查询结果的准确度，管理员必须定期更新 locate 数据库。

  - **基本语法**：`locate 搜索文件`。
  - **特别说明**：第一次运行`locate`指令前，必须使用`updatedb`指令创建 locate 数据库。
  - **应用实例**：若要使用`locate`指令快速定位`hello.txt`文件所在目录，先运行`updatedb`创建数据库（首次使用时），然后输入`locate hello.txt`，系统将列出包含`hello.txt`的文件路径。

### 9.6.3 grep 指令和管道符号 |

- grep 用于过滤查找，管道符 “|” 表示将前一个命令的处理结果输出传递给后面的命令处理

  - **基本语法**：`grep [选项] 查找内容 源文件`。

  - 常用选项

    - `-n`：显示匹配行及行号。

  - 应用实例

    ：在

    ```
    hello.txt
    ```

    文件中查找

    ```
    "yes"
    ```

    所在行，并且显示行号，有以下两种写法：

    - **写法 1**：`cat /home/hello.txt | grep "yes"`，先使用`cat`命令读取`/home/hello.txt`文件内容，然后通过管道符`|`将内容传递给`grep`命令进行过滤查找。
    - **写法 2**：`grep -n "yes" /home/hello.txt`，直接使用`grep`命令在`/home/hello.txt`文件中查找`"yes"`，并通过`-n`选项显示行号。

## 9.7 压缩和解压类

### 9.7.1 gzip/gunzip 指令

- gzip 用于压缩文件，gunzip 用于解压
  - 基本语法
    - `gzip 文件`：压缩文件，只能将文件压缩为`*.gz`文件。例如，`gzip /home/hello.txt`，会将`/home/hello.txt`文件压缩为`/home/hello.txt.gz`，原文件`/home/hello.txt`会被删除。
    - `gunzip 文件.gz`：解压缩`*.gz`文件。例如，`gunzip /home/hello.txt.gz`，会将`/home/hello.txt.gz`解压为`/home/hello.txt`。
  - 应用实例
    - **案例 1**：`gzip`压缩，将`/home`下的`hello.txt`文件进行压缩，输入`gzip /home/hello.txt`。
    - **案例 2**：`gunzip`压缩，将`/home`下的`hello.txt.gz`文件进行解压缩，输入`gunzip /home/hello.txt.gz`。

### 9.7.2 zip/unzip 指令

- zip 用于压缩文件，unzip 用于解压，在项目打包发布中很有用
  - 基本语法
    - `zip [选项] XXX.zip 将要压缩的内容`：压缩文件和目录的命令。
    - `unzip [选项] XXX.zip`：解压缩文件。
  - zip 常用选项
    - `-r`：递归压缩，即压缩目录及其包含的所有文件和子目录。
  - unzip 的常用选项
    - `-d<目录>`：指定解压后文件的存放目录。
  - 应用实例
    - **案例 1**：将`/home`下的所有文件 / 文件夹进行压缩成`myhome.zip`，输入`zip -r myhome.zip /home/`，此命令会将`home`目录及其包含的所有文件和子文件夹都压缩到`myhome.zip`文件中。
    - **案例 2**：将`myhome.zip`解压到`/opt/tmp`目录下，先创建`/opt/tmp`目录，即`mkdir /opt/tmp`，然后输入`unzip -d /opt/tmp /home/myhome.zip`，将`myhome.zip`解压到`/opt/tmp`目录中。

### 9.7.3 tar 指令

- tar 指令是打包指令，最后打包后的文件是.tar.gz 的文件
  - **基本语法**：`tar [选项] XXX.tar.gz 打包的内容`，用于打包目录，压缩后的文件格式为`.tar.gz`。
  - 选项说明
    - `-z`：表示同时启用 gzip 压缩。
    - `-c`：创建新的归档文件。
    - `-v`：显示详细的处理过程，在打包或解压时会显示处理的文件名。
    - `-f`：指定归档文件名。
    - `-x`：从归档文件中提取文件，即解压。
    - `-C`：指定解压目录（仅在解压时使用）。
  - 应用实例
    - **案例 1**：压缩多个文件，将`/home/pig.txt`和`/home/cat.txt`压缩成`pc.tar.gz`，输入`tar -zcvf pc.tar.gz /home/pig.txt /home/cat.txt`，其中`-z`启用 gzip 压缩，`-c`创建归档，`-v`显示详细信息，`-f`指定归档文件名`pc.tar.gz`，后面跟要压缩的文件列表。
    - **案例 2**：将`/home`的文件夹压缩成`myhome.tar.gz`，输入`tar -zcvf myhome.tar.gz /home/`。
    - **案例 3**：将`pc.tar.gz`解压到当前目录，输入`tar -zxvf pc.tar.gz`，`-z`表示用 gzip 解压，`-x`提取文件，`-v`显示详细信息，`-f`指定要解压的归档文件名。
    - **案例 4**：将`myhome.tar.gz`解压到`/opt/tmp2`目录下，先创建`/opt/tmp2`目录，即`mkdir /opt/tmp2`，然后输入`tar -zxvf /home/myhome.tar.gz -C /opt/tmp2`，`-C`指定解压到`/opt/tmp2`目录。

# 课后习题

### 一、选择题（15 道）

1. 以下能将系统切换到关机运行级别的命令是（ ）
   A. `init 0`
   B. `init 1`
   C. `init 6`
   D. `init 3`
   **答案**：A
   **解析**：运行级别 0 表示关机，`init 0`可实现关机，A 正确；`init 1`为单用户模式，`init 6`是重启，`init 3`是多用户有网络服务模式，B、C、D 错误。
2. 在 CentOS7 系统中，若要将默认运行级别设置为命令行模式，应执行的命令是（ ）
   A. `systemctl set - default graphical.target`
   B. `systemctl set - default multi - user.target`
   C. `init 3`
   D. `init 5`
   **答案**：B
   **解析**：CentOS7 中，`systemctl set - default multi - user.target`将默认运行级别设为命令行模式（类似旧版的 3 级别），B 正确；`systemctl set - default graphical.target`是设置为图形界面模式，`init`命令在 CentOS7 中不再用于设置默认运行级别，A、C、D 错误。
3. 要查看`rm`命令的帮助信息，以下正确的是（ ）
   A. `help rm`
   B. `man rm`
   C. `rm --help`
   D. `rm -h`
   **答案**：B
   **解析**：`man`命令用于获取命令的帮助信息，查看`rm`命令帮助用`man rm`，B 正确；`help`用于获取 Shell 内置命令帮助，`rm`不是内置命令，`rm --help`和`rm -h`不是获取帮助的正确方式，A、C、D 错误。
4. 以下哪个命令可以显示当前工作目录的绝对路径（ ）
   A. `ls`
   B. `cd`
   C. `pwd`
   D. `mkdir`
   **答案**：C
   **解析**：`pwd`用于显示当前工作目录绝对路径，C 正确；`ls`用于列出目录内容，`cd`用于切换目录，`mkdir`用于创建目录，A、B、D 错误。
5. 要以列表形式显示当前目录下所有文件（包括隐藏文件），应使用的命令是（ ）
   A. `ls -a`
   B. `ls -l`
   C. `ls -al`
   D. `ls`
   **答案**：C
   **解析**：`ls -a`显示所有文件（含隐藏），`ls -l`以列表形式显示，`ls -al`同时满足显示所有文件（含隐藏）且以列表形式，C 正确；`ls`默认不显示隐藏文件且不是列表形式，A、B、D 错误。
6. 若当前目录为`/home/user`，要切换到根目录，使用绝对路径的命令是（ ）
   A. `cd..`
   B. `cd /`
   C. `cd ~`
   D. `cd /home`
   **答案**：B
   **解析**：根目录绝对路径为`/`，`cd /`可切换到根目录，B 正确；`cd..`返回上一级目录，`cd ~`回到家目录，`cd /home`进入`/home`目录，A、C、D 错误。
7. 要创建一个多级目录`/data/apps/logs`，应使用的命令是（ ）
   A. `mkdir /data/apps/logs`
   B. `mkdir -p /data/apps/logs`
   C. `mkdir -r /data/apps/logs`
   D. `mkdir -f /data/apps/logs`
   **答案**：B
   **解析**：`mkdir -p`用于创建多级目录，`mkdir -p /data/apps/logs`可创建该多级目录，B 正确；`mkdir`默认不能创建多级目录，`-r`和`-f`不是`mkdir`创建多级目录的参数，A、C、D 错误。
8. 要删除一个非空目录`/home/backup`，应使用的命令是（ ）
   A. `rmdir /home/backup`
   B. `rm -rf /home/backup`
   C. `rm /home/backup`
   D. `rm -r /home/backup`
   **答案**：B
   **解析**：`rm -rf`可强制递归删除非空目录，删除`/home/backup`用`rm -rf /home/backup`，B 正确；`rmdir`只能删除空目录，`rm`默认不能删除目录，`rm -r`需确认且不能强制删除，A、C、D 错误。
9. 要将`/home/file.txt`文件移动到`/opt`目录下，应使用的命令是（ ）
   A. `mv /home/file.txt /opt`
   B. `cp /home/file.txt /opt`
   C. `mv /opt /home/file.txt`
   D. `cp -r /home/file.txt /opt`
   **答案**：A
   **解析**：`mv`用于移动文件，`mv /home/file.txt /opt`将文件从`/home`移动到`/opt`，A 正确；`cp`是复制，`mv`命令参数顺序错误，`cp -r`用于递归复制目录，B、C、D 错误。
10. 要查看`/etc/passwd`文件的前 20 行内容，应使用的命令是（ ）
    A. `head -n 20 /etc/passwd`
    B. `tail -n 20 /etc/passwd`
    C. `cat -n 20 /etc/passwd`
    D. `more -n 20 /etc/passwd`
    **答案**：A
    **解析**：`head -n 20`可查看文件前 20 行，`head -n 20 /etc/passwd`正确，A 正确；`tail -n 20`查看文件后 20 行，`cat -n`显示行号但不是指定行数，`more`无此用法，B、C、D 错误。
11. 要将当前目录下所有文件列表覆盖写入到`files.txt`文件中，应使用的命令是（ ）
    A. `ls > files.txt`
    B. `ls >> files.txt`
    C. `ls -l > files.txt`
    D. `ls -l >> files.txt`
    **答案**：C
    **解析**：`ls -l`以列表形式显示文件信息，`>`用于覆盖写入，`ls -l > files.txt`符合要求，C 正确；`ls`不是列表形式，`>>`是追加，A、B、D 错误。
12. 要在`/tmp`目录下创建一个指向`/var/log`目录的软链接`log_link`，应使用的命令是（ ）
    A. `ln -s /var/log /tmp/log_link`
    B. `ln /var/log /tmp/log_link`
    C. `ln -s /tmp/log_link /var/log`
    D. `ln -r /var/log /tmp/log_link`
    **答案**：A
    **解析**：创建软链接语法`ln -s [原文件或目录] [软链接名]`，`ln -s /var/log /tmp/log_link`正确，A 正确；`ln`默认创建硬链接，参数顺序错误，`-r`不是`ln`创建软链接参数，B、C、D 错误。
13. 要查看系统当前时间的年月日时分秒，格式为`YYYY - MM - DD HH:MM:SS`，应使用的命令是（ ）
    A. `date`
    B. `date +%Y-%m-%d %H:%M:%S`
    C. `date +%Y-%m-%d`
    D. `date +%H:%M:%S`
    **答案**：B
    **解析**：`date +%Y-%m-%d %H:%M:%S`可按指定格式显示年月日时分秒，B 正确；`date`是默认格式显示，`date +%Y-%m-%d`只显示年月日，`date +%H:%M:%S`只显示时分秒，A、C、D 错误。
14. 要在整个系统中查找大小大于 500M 的文件，应使用的命令是（ ）
    A. `find / -size +500M`
    B. `locate -size +500M`
    C. `find / -name +500M`
    D. `locate / -size +500M`
    **答案**：A
    **解析**：`find`命令按条件查找文件，`find / -size +500M`在根目录下查找大于 500M 的文件，A 正确；`locate`不能按文件大小查找，`find -name`按文件名查找，B、C、D 错误。
15. 要将`/home/user`目录下的所有文件和子目录压缩成`user_backup.zip`文件，应使用的命令是（ ）
    A. `zip user_backup.zip /home/user`
    B. `zip -r user_backup.zip /home/user`
    C. `tar -zcvf user_backup.zip /home/user`
    D. `gzip -r user_backup.zip /home/user`
    **答案**：B
    **解析**：`zip -r`递归压缩目录，`zip -r user_backup.zip /home/user`可将`/home/user`及其子目录文件压缩，B 正确；`zip`默认不递归，`tar`压缩后格式是`.tar.gz`，`gzip`只能压缩文件不能压缩目录，A、C、D 错误。

### 二、简答题（10 道）

1. 简述 Linux 系统中运行级别 0、1、3、5、6 的作用。
   **参考答案**：运行级别 0 表示关机，用于停止系统运行并关闭电源；运行级别 1 是单用户模式，常用于找回丢失密码，可在该模式下无密码验证获取 root 权限；运行级别 3 是多用户状态且有网络服务，是常用运行级别，支持多用户通过网络进行各种操作；运行级别 5 是图形界面，提供直观操作环境，适合普通用户日常操作；运行级别 6 是系统重启，用于重新启动系统。
2. 如何在 CentOS7 系统中查看当前默认运行级别，以及如何将默认运行级别设置为图形界面模式？
   **参考答案**：在 CentOS7 系统中，查看当前默认运行级别的命令是`systemctl get - default`。将默认运行级别设置为图形界面模式的命令是`systemctl set - default graphical.target`。
3. 请说明`man`命令和`help`命令的区别。
   **参考答案**：`man`命令用于获取系统中各种命令、配置文件等的详细帮助信息，适用于大多数系统命令。而`help`命令主要用于获取 Shell 内置命令的帮助信息，对于外部命令无法使用`help`获取帮助。
4. 解释`ls -al`命令中各参数的含义，并说明该命令的作用。
   **参考答案**：`ls`命令用于列出目录内容。`-a`参数表示显示当前目录下的所有文件和目录，包括以`.`开头的隐藏文件和目录；`-l`参数表示以列表形式显示文件和目录的详细信息，如文件权限、所有者、文件大小、修改时间等。`ls -al`命令的作用是将当前目录下所有文件和目录以详细列表形式展示出来。
5. 阐述绝对路径和相对路径的概念，并举例说明在`cd`命令中的应用。
   **参考答案**：绝对路径是从根目录`/`开始的完整路径，它明确指定了文件或目录在文件系统中的准确位置，与当前工作目录无关。例如，`/home/user/Documents`是一个绝对路径。相对路径是相对于当前工作目录的路径，它基于当前所在位置来定位文件或目录。例如，若当前工作目录为`/home/user`，要进入`Documents`目录，使用相对路径`cd Documents`即可；若要回到上一级目录，使用`cd..`，这里`..`就是相对路径表示当前目录的上一级。
6. 要删除一个目录，`rmdir`和`rm -rf`命令有什么区别？在什么情况下使用它们？
   **参考答案**：`rmdir`命令只能删除空目录，如果目录下有任何文件或子目录，该命令将无法执行。适用于删除已经清空内容的目录。`rm -rf`命令可以强制递归删除非空目录及其包含的所有文件和子目录，且不进行提示确认。常用于需要彻底删除一个包含内容的目录，且确定不需要保留目录内任何数据的情况。但使用`rm -rf`时需特别谨慎，因为一旦执行，数据将无法恢复。
7. 如何使用`touch`命令创建多个空文件？请举例说明。
   **参考答案**：`touch`命令后可接多个文件名来创建多个空文件。例如，要在`/tmp`目录下创建`file1.txt`、`file2.txt`和`file3.txt`三个空文件，可使用命令`touch /tmp/file1.txt /tmp/file2.txt /tmp/file3.txt`。在当前目录下创建的话，直接`touch file1.txt file2.txt file3.txt`即可。
8. 简述`grep`命令结合管道符`|`的作用，并举例说明如何在`/var/log/syslog`文件中查找包含`error`关键字的行。
   **参考答案**：`grep`命令用于在文件中过滤查找指定内容，管道符`|`可以将前一个命令的输出作为后一个命令的输入。例如要在`/var/log/syslog`文件中查找包含`error`关键字的行，可使用命令`cat /var/log/syslog | grep error`，这里`cat`命令读取`/var/log/syslog`文件内容，通过管道符传递给`grep`命令进行过滤，查找出包含`error`的行。也可以直接使用`grep error /var/log/syslog`实现同样功能。
9. 说明`date -s`命令的作用，并举例设置系统时间为`2024 - 12 - 31 23:59:59`。
   **参考答案**：`date -s`命令用于设置系统的当前时间。设置系统时间为`2024 - 12 - 31 23:59:59`的命令为`date -s "2024 - 12 - 31 23:59:59"`，注意设置时间的字符串需要用引号括起来，以确保格式正确被识别。
10. 请解释`tar`命令中`-z`、`-c`、`-v`、`-f`、`-x`、`-C`这些选项的含义。
    **参考答案**：`-z`表示同时启用 gzip 压缩或解压，用于处理`.tar.gz`格式的文件；`-c`用于创建新的归档文件，即打包文件或目录；`-v`用于显示详细的处理过程，在打包或解压时会显示正在处理的文件名等信息；`-f`用于指定归档文件名，必须紧跟在`-f`后面给出文件名；`-x`用于从归档文件中提取文件，即解压操作；`-C`用于指定解压目录，仅在解压时使用，指定解压后的文件存放路径。

### 三、实操题（5 道）

1. 在

   ```
   /home
   ```

   目录下创建一个名为

   ```
   project
   ```

   的目录，在

   ```
   project
   ```

   目录下再创建

   ```
   src
   ```

   和

   ```
   docs
   ```

   两个子目录。然后在

   ```
   src
   ```

   目录下创建一个空文件

   ```
   main.c
   ```

   ，在

   ```
   docs
   ```

   目录下创建一个空文件

   ```
   readme.txt
   ```

   。请写出完整的操作命令。

   参考答案思路

   - `mkdir /home/project`：在`/home`目录下创建`project`目录。
   - `mkdir /home/project/src /home/project/docs`：在`project`目录下同时创建`src`和`docs`子目录。
   - `touch /home/project/src/main.c`：在`src`目录下创建`main.c`空文件。
   - `touch /home/project/docs/readme.txt`：在`docs`目录下创建`readme.txt`空文件。

2. 假设当前目录下有一个

   ```
   test.txt
   ```

   文件，其内容为一些英文段落。请使用

   ```
   grep
   ```

   命令找出包含单词

   ```
   hello
   ```

   的行，并将这些行输出到

   ```
   result.txt
   ```

   文件中（覆盖写）。

   参考答案思路

   - `grep hello test.txt > result.txt`：使用`grep`命令在`test.txt`文件中查找包含`hello`的行，通过`>`将结果覆盖输出到`result.txt`文件中。

3. 请将

   ```
   /var/log
   ```

   目录下所有以

   ```
   .log
   ```

   结尾的文件打包压缩成

   ```
   log_backup.tar.gz
   ```

   ，并将该压缩包移动到

   ```
   /backup
   ```

   目录下（假设

   ```
   /backup
   ```

   目录已存在）。写出具体操作步骤。

   参考答案思路

   - `tar -zcvf log_backup.tar.gz /var/log/*.log`：使用`tar`命令将`/var/log`目录下所有以`.log`结尾的文件打包压缩成`log_backup.tar.gz`，`-z`启用 gzip 压缩，`-c`创建归档，`-v`显示详细信息，`-f`指定归档文件名。
   - `mv log_backup.tar.gz /backup`：将生成的压缩包移动到`/backup`目录下。

4. 查找`/usr/local`目录下所有属于`root`用户的文件，并将这些文件的路径输出到`root_files.txt`文件中（追加写）。请写出实现

​		参考答案思路

- `find /usr/local -user root >> root_files.txt`：利用`find`命令在`/usr/local`目录及其子目录下查找属于`root`用户的文件，通过`>>`将查找到的文件路径追加到`root_files.txt`文件中。

1. 现有一个

   ```
   data.zip
   ```

   压缩文件，其中包含多个文件和目录。请将其解压到

   ```
   /tmp/data
   ```

   目录下（假设

   ```
   /tmp/data
   ```

   目录已存在），然后将解压后的所有文件和目录的所有者更改为

   ```
   user1
   ```

   （假设

   ```
   user1
   ```

   用户已存在）。写出操作步骤。

   参考答案思路

   - `unzip -d /tmp/data data.zip`：使用`unzip`命令，通过`-d`选项指定解压目录为`/tmp/data`，将`data.zip`解压到该目录下。
   - `chown -R user1:user1 /tmp/data`：利用`chown`命令，`-R`选项表示递归操作，将`/tmp/data`目录及其包含的所有文件和子目录的所有者和所属组都更改为`user1`。